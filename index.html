<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Horarios y secciones Empleo de TIC Vida Académica 1er Semestre 2026</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Fuente Inter (opcional, para mejorar la apariencia) -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
    </style>
</head>
<body class="bg-slate-50 min-h-screen text-slate-800">

    <!-- Header Institucional -->
    <header class="bg-white border-b border-slate-200 py-6">
        <div class="container mx-auto px-4 text-center">
            <!-- Logo UPLA -->
            <div class="flex items-center justify-center mb-6">
                <img src="https://www.upla.cl/portada/wp-content/uploads/2015/09/logoupla.png" alt="Universidad de Playa Ancha" class="h-20 object-contain">
            </div>
            
            <h1 class="text-2xl md:text-3xl font-bold text-slate-900 max-w-4xl mx-auto leading-tight">
                Horarios y secciones Empleo de TIC Vida Académica 1º Semestre 2026
            </h1>
            <p class="text-slate-500 mt-2 text-sm md:text-base">
                Selecciona una categoría y elige una opción para ver los horarios.
            </p>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8">

        <!-- Panel de Búsqueda -->
        <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6 mb-8 max-w-5xl mx-auto">
            
            <p class="text-sm font-semibold text-slate-700 mb-3">1. Selecciona qué quieres buscar:</p>
            
            <!-- Botones de Categoría -->
            <div id="category-buttons" class="flex flex-wrap gap-2 mb-6">
                <!-- Se generan con JS -->
            </div>

            <p class="text-sm font-semibold text-slate-700 mb-3">2. Elige una opción de la lista:</p>

            <!-- Selector Desplegable -->
            <div class="relative">
                <!-- Icono Filter -->
                <div class="absolute left-4 top-3.5 h-5 w-5 text-slate-500 pointer-events-none">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon></svg>
                </div>
                
                <select id="option-select" class="w-full pl-12 pr-10 py-3 bg-slate-50 border border-slate-300 rounded-lg text-slate-700 focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent transition-all shadow-sm appearance-none cursor-pointer">
                    <option value="">-- Selecciona una opción --</option>
                </select>

                <!-- Icono Chevron -->
                <div class="absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none text-slate-500">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="rotate-90"><polyline points="9 18 15 12 9 6"></polyline></svg>
                </div>
            </div>
            
            <div id="results-count" class="mt-2 text-xs text-slate-400 text-right hidden">
                Mostrando <span id="count-number">0</span> resultados
            </div>
        </div>

        <!-- Estado Inicial (Instrucciones) -->
        <div id="initial-state" class="text-center py-20 bg-white rounded-xl border border-slate-200 shadow-sm opacity-80 max-w-3xl mx-auto">
            <div class="bg-sky-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4">
                <!-- Icono Search -->
                <svg class="h-10 w-10 text-sky-400" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
            </div>
            <h3 class="text-xl font-bold text-slate-700 mb-2">Comienza tu búsqueda</h3>
            <p class="text-slate-500 max-w-md mx-auto">
                Selecciona una categoría (Docente, Carrera, etc.) y una opción de la lista de arriba para visualizar los horarios correspondientes.
            </p>
        </div>

        <!-- Contenedor de Resultados (Oculto inicialmente) -->
        <div id="results-container" class="hidden">
            
            <!-- Vista Escritorio: Tabla -->
            <div class="hidden md:block overflow-hidden rounded-xl shadow-sm border border-slate-200 bg-white mb-6">
                <table class="w-full text-left border-collapse">
                    <thead>
                        <tr class="bg-slate-50 text-slate-600 text-xs uppercase tracking-wider border-b border-slate-200">
                            <th class="p-4 font-bold">Código / Sección</th>
                            <th class="p-4 font-bold">Carrera</th>
                            <th class="p-4 font-bold">Asignatura</th>
                            <th class="p-4 font-bold">Horario</th>
                            <th class="p-4 font-bold">Laboratorio</th>
                            <th class="p-4 font-bold">Docente</th>
                        </tr>
                    </thead>
                    <tbody id="table-body" class="text-sm divide-y divide-slate-100">
                        <!-- Filas generadas por JS -->
                    </tbody>
                </table>
            </div>

            <!-- Vista Móvil: Cards -->
            <div id="mobile-cards" class="md:hidden grid grid-cols-1 gap-4">
                <!-- Cards generadas por JS -->
            </div>

            <!-- Estado sin resultados (dentro del contenedor de resultados) -->
            <div id="no-results" class="hidden p-12 text-center bg-white rounded-xl border border-slate-200">
                <div class="flex flex-col items-center justify-center text-slate-400">
                    <svg class="h-10 w-10 mb-2 opacity-20" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                    <p>No se encontraron resultados para tu búsqueda.</p>
                </div>
            </div>

        </div>

    </main>

    <script>
        // --- DATOS ---
        const initialData = [
            { id: 1, carrera: "Pedagogía Inglés Valpo.", codigo: "SEL 3113-1", asignatura: "EMPLEO DE TIC PARA LA VIDA ACADÉMICA", cupos: 40, dia: "Martes", bloque: "1 y 2", hora: "8:00-10:45", lab: "Casa Central 5", docente: "Marcela Vera" },
            { id: 2, carrera: "Pedagogía Castellano San Felipe", codigo: "SEL 3113-2", asignatura: "EMPLEO DE TIC PARA LA VIDA ACADÉMICA", cupos: 40, dia: "Miércoles", bloque: "2 y 3", hora: "9:50-12:15", lab: "San Felipe", docente: "Daniela Salinas" },
            { id: 3, carrera: "Pedagogía Inglés San Felipe", codigo: "SEL 3113-3", asignatura: "EMPLEO DE TIC PARA LA VIDA ACADÉMICA", cupos: 20, dia: "Miércoles", bloque: "5 y 6", hora: "14:00-16:45", lab: "San Felipe", docente: "Daniela Salinas" },
            { id: 4, carrera: "Pedagogía en Filosofía", codigo: "SEL 3113-4", asignatura: "EMPLEO DE TIC PARA LA VIDA ACADÉMICA", cupos: 8, dia: "Martes", bloque: "1 y 2", hora: "8:00-10:45", lab: "Casa Central 6", docente: "José Miranda" },
            // Actualizado a Martes 11:00-13:45 con Francisca Valdés
            { id: 5, carrera: "Nutrición y dietética", codigo: "SEL 3113-5", asignatura: "EMPLEO DE TIC PARA LA VIDA ACADÉMICA", cupos: 40, dia: "Martes", bloque: "3 y 4", hora: "11:00-13:45", lab: "Casa Central 6", docente: "Francisca Valdés" },
            { id: 6, carrera: "Nutrición y dietética", codigo: "SEL 3113-6", asignatura: "EMPLEO DE TIC PARA LA VIDA ACADÉMICA", cupos: 20, dia: "Miércoles", bloque: "1 y 2", hora: "8:00-10:45", lab: "Casa Central 6", docente: "Macarena Rojas" },
            { id: 7, carrera: "Fonoaudiología", codigo: "SEL 3113-7", asignatura: "EMPLEO DE TIC PARA LA VIDA ACADÉMICA", cupos: 40, dia: "Martes", bloque: "3 y 4", hora: "11:00-13:45", lab: "Lab.Fac.Ciencias 102", docente: "José Miranda" },
            { id: 8, carrera: "Terapia Ocupacional", codigo: "SEL 3113-8", asignatura: "EMPLEO DE TIC PARA LA VIDA ACADÉMICA", cupos: 40, dia: "Martes", bloque: "3 y 4", hora: "11:00-13:45", lab: "Casa Central 5", docente: "Diego Cabrera" },
            { id: 9, carrera: "Kinesiología", codigo: "SEL 3113-9", asignatura: "EMPLEO DE TIC PARA LA VIDA ACADÉMICA", cupos: 40, dia: "Miércoles", bloque: "1 y 2", hora: "8:00-10:45", lab: "Casa Central 5", docente: "Marcela Vera" },
            { id: 10, carrera: "Kinesiología", codigo: "SEL 3113-10", asignatura: "EMPLEO DE TIC PARA LA VIDA ACADÉMICA", cupos: 25, dia: "Miércoles", bloque: "1 y 2", hora: "8:00-10:45", lab: "Casa Central 6", docente: "Macarena Rojas" },
            { id: 11, carrera: "Diseño", codigo: "TIC 1111-1", asignatura: "TIC para la Vida Académica", cupos: 25, dia: "Lunes", bloque: "1 y 2", hora: "8:00-10:45", lab: "Lab. Fac. Artes B-401", docente: "Humberto Zapata" },
            { id: 12, carrera: "Diseño", codigo: "SEL 3114-1", asignatura: "EMPLEO DE TIC PARA LA VIDA PROFESIONAL", cupos: 25, dia: "Martes", bloque: "1 y 2", hora: "8:00-10:45", lab: "Lab. Fac. Artes B-401", docente: "Humberto Zapata" },
            { id: 13, carrera: "Teatro", codigo: "TIC 1111-2", asignatura: "TIC PARA LA VIDA PROFESIONAL", cupos: 15, dia: "Jueves", bloque: "1 y 2", hora: "8:00-10:45", lab: "Lab. Fac. Artes B-401", docente: "Macarena Rojas" },
            { id: 14, carrera: "Pedagogía Educación Musical", codigo: "TIC 1111-3", asignatura: "EMPLEO DE TIC PARA LA VIDA ACADÉMICA", cupos: 15, dia: "Martes", bloque: "5 y 6", hora: "14:00-16:45", lab: "Casa Central 6", docente: "Diego Cabrera" },
            // Actualizado a Lab.Fac.Ciencias 102
            { id: 15, carrera: "Ingeniería Comercial", codigo: "SEL 3113-12", asignatura: "EMPLEO DE TIC PARA LA VIDA ACADÉMICA", cupos: 20, dia: "Miércoles", bloque: "1 y 2", hora: "8:00-10:45", lab: "Lab.Fac.Ciencias 102", docente: "Melissa Vargas" },
            // Actualizado a Lab.Fac.Ciencias 102
            { id: 16, carrera: "Ingeniería Civil Ambiental", codigo: "TIC 1111-5", asignatura: "EMPLEO DE TIC PARA LA VIDA ACADÉMICA", cupos: 0, dia: "Viernes", bloque: "1 y 2", hora: "8:00-10:45", lab: "Lab.Fac.Ciencias 102", docente: "Melissa Vargas" },
            // Actualizado a Lab.Fac.Ciencias 102
            { id: 17, carrera: "Ingeniería Civil Informática", codigo: "TIC 1111-5", asignatura: "EMPLEO DE TIC PARA LA VIDA ACADÉMICA", cupos: 35, dia: "Viernes", bloque: "1 y 2", hora: "8:00-10:45", lab: "Lab.Fac.Ciencias 102", docente: "Melissa Vargas" },
            // Actualizado a Lab.Fac.Ciencias 102
            { id: 18, carrera: "Ped. Biología y Cs", codigo: "SEL 3113-13", asignatura: "EMPLEO DE TIC PARA LA VIDA ACADÉMICA", cupos: 6, dia: "Miércoles", bloque: "3 y 5", hora: "11:00-12:15 / 14:00-15:15", lab: "Lab.Fac.Ciencias 102", docente: "Macarena Rojas" },
            { id: 19, carrera: "Derecho", codigo: "SEL 5114-1", asignatura: "EMPLEO DE TIC PARA LA VIDA PROFESIONAL", cupos: 40, dia: "Lunes", bloque: "1 y 2", hora: "8:00-10:45", lab: "Casa Central 6", docente: "José Miranda" },
            { id: 20, carrera: "Psicología", codigo: "SEL 3113-20", asignatura: "EMPLEO DE TIC PARA LA VIDA ACADÉMICA", cupos: 40, dia: "Lunes", bloque: "3 y 4", hora: "11:00-13:45", lab: "Casa Central 5", docente: "Melissa Vargas" },
            { id: 21, carrera: "Pedagogía Artes Visuales", codigo: "TIC 1111-3", asignatura: "TIC PARA LA VIDA ACADÉMICA", cupos: 20, dia: "Martes", bloque: "5 y 6", hora: "14:00-16:45", lab: "Casa Central 6", docente: "Diego Cabrera" },
            { id: 22, carrera: "Dibujante Proyectista", codigo: "TIC 1111-4", asignatura: "EMPLEO DE TIC PARA LA VIDA ACADÉMICA", cupos: 15, dia: "Lunes", bloque: "1 y 2", hora: "8:00-10:45", lab: "Casa Central 5", docente: "Francisca Valdés" },
            { id: 23, carrera: "Licenciatura en Arte", codigo: "TIC 1111-4", asignatura: "EMPLEO DE TIC PARA LA VIDA ACADÉMICA", cupos: 30, dia: "Lunes", bloque: "1 y 2", hora: "8:00-10:45", lab: "Casa Central 5", docente: "Francisca Valdés" },
            { id: 24, carrera: "Ped. Educación Física Damas", codigo: "SEL 3113-14", asignatura: "EMPLEO DE TIC PARA LA VIDA ACADÉMICA", cupos: 40, dia: "Jueves", bloque: "3 y 4", hora: "11:00-13:45", lab: "Casa Central 5", docente: "Francisca Valdés" },
            { id: 25, carrera: "Ped. Educación Física Varones", codigo: "SEL 3113-15", asignatura: "EMPLEO DE TIC PARA LA VIDA ACADÉMICA", cupos: 40, dia: "Jueves", bloque: "3 y 4", hora: "11:00-13:45", lab: "Casa Central 6", docente: "Daniela Salinas" },
            { id: 26, carrera: "Ped. Educación Física Damas", codigo: "TIC 1111-7", asignatura: "TIC para la Vida Académica", cupos: 40, dia: "Jueves", bloque: "1 y 2", hora: "8:00-10:45", lab: "Casa Central 5", docente: "Marcela Vera" },
            { id: 27, carrera: "Ped. Educación Física Varones", codigo: "TIC 1111-8", asignatura: "TIC para la Vida Académica", cupos: 40, dia: "Jueves", bloque: "1 y 2", hora: "8:00-10:45", lab: "Casa Central 6", docente: "Daniela Salinas" },
            { id: 28, carrera: "Pedagogía Ed Diferencial Valpo.", codigo: "SEL 3113-17", asignatura: "EMPLEO DE TIC PARA LA VIDA ACADÉMICA", cupos: 40, dia: "Jueves", bloque: "1 y 2", hora: "8:00-10:45", lab: "Lab. Fac. Artes B-401", docente: "José Miranda" },
            { id: 29, carrera: "Pedagogía Ed Diferencial San Felipe", codigo: "SEL 3113-16", asignatura: "EMPLEO DE TIC PARA LA VIDA ACADÉMICA", cupos: 46, dia: "Martes", bloque: "2 y 3", hora: "9:50-12:15", lab: "San Felipe", docente: "Germán Flores" },
            // Actualizado a Lab.Fac.Ciencias 104
            { id: 30, carrera: "Pedagogía Educación Básica Valpo.", codigo: "SEL 3113-18", asignatura: "EMPLEO DE TIC PARA LA VIDA ACADÉMICA", cupos: 40, dia: "Jueves", bloque: "1 y 2", hora: "8:00-10:45", lab: "Lab.Fac.Ciencias 104", docente: "Fabián González" },
            // Actualizado a Lab.Fac.Ciencias 102
            { id: 31, carrera: "Pedagogía en Educación Parvularia", codigo: "SEL 3113-19", asignatura: "EMPLEO DE TIC PARA LA VIDA ACADÉMICA", cupos: 40, dia: "Jueves", bloque: "1 y 2", hora: "8:00-10:45", lab: "Lab.Fac.Ciencias 102", docente: "Francisca Valdés" },
            { id: 32, carrera: "Pedagogía Ed. Diferencial Valpo.", codigo: "SEL 3113-25", asignatura: "EMPLEO DE TIC PARA LA VIDA ACADÉMICA", cupos: 40, dia: "Viernes", bloque: "1 y 2", hora: "8:00-10:45", lab: "Casa Central 5", docente: "Marcela Vera" },
            { id: 33, carrera: "Pedagogía en Educación Parvularia", codigo: "SEL 3113-26", asignatura: "EMPLEO DE TIC PARA LA VIDA ACADÉMICA", cupos: 40, dia: "Miércoles", bloque: "3 y 4", hora: "11:00-13:45", lab: "Casa Central 5", docente: "Melissa Vargas" },
            { id: 34, carrera: "Psicología", codigo: "SEL 3113-21", asignatura: "EMPLEO DE TIC PARA LA VIDA ACADÉMICA", cupos: 40, dia: "Martes", bloque: "5 y 6", hora: "14:00-16:45", lab: "Casa Central 5", docente: "Melissa Vargas" },
            // Actualizado a Lab.Fac.Ciencias 102
            { id: 35, carrera: "Periodismo", codigo: "SEL 3113-24", asignatura: "EMPLEO DE TIC PARA LA VIDA ACADÉMICA", cupos: 25, dia: "Lunes", bloque: "1 y 2", hora: "8:00-10:45", lab: "Lab.Fac.Ciencias 102", docente: "Franco Valdés" },
            // Actualizado a Lab.Fac.Ciencias 102
            { id: 36, carrera: "Psicología", codigo: "SEL 3113-22", asignatura: "EMPLEO DE TIC PARA LA VIDA ACADÉMICA", cupos: 40, dia: "Lunes", bloque: "3 y 4", hora: "14:00-16:45", lab: "Lab.Fac.Ciencias 102", docente: "Macarena Rojas" },
            // Actualizado a Lab.Fac.Ciencias 104
            { id: 37, carrera: "Sociología", codigo: "TIC 1111-9", asignatura: "TIC para la Vida Académica", cupos: 0, dia: "Martes", bloque: "1 y 2", hora: "8:00-10:45", lab: "Lab.Fac.Ciencias 104", docente: "Macarena Rojas" },
            { id: 38, carrera: "Pedagogía Castellano Valpo.", codigo: "SEL 3113-4", asignatura: "EMPLEO DE TIC PARA LA VIDA ACADÉMICA", cupos: 35, dia: "Martes", bloque: "1 y 2", hora: "8:00-10:45", lab: "Casa Central 6", docente: "José Miranda" },
            { id: 39, carrera: "Derecho", codigo: "SEL 5114-2", asignatura: "EMPLEO DE TIC PARA LA VIDA PROFESIONAL", cupos: 40, dia: "Lunes", bloque: "3 y 4", hora: "11:00-13:45", lab: "Casa Central 6", docente: "José Miranda" },
            // Actualizado a Lab.Fac.Ciencias 102
            { id: 40, carrera: "Ped. en Química y Cs", codigo: "SEL 3113-13", asignatura: "EMPLEO DE TIC PARA LA VIDA ACADÉMICA", cupos: 6, dia: "Miércoles", bloque: "3 y 5", hora: "11:00-12:15 / 14:00-15:15", lab: "Lab.Fac.Ciencias 102", docente: "Macarena Rojas" },
            // Actualizado a Lab.Fac.Ciencias 102
            { id: 41, carrera: "Ped. en Matemática", codigo: "SEL 3113-13", asignatura: "EMPLEO DE TIC PARA LA VIDA ACADÉMICA", cupos: 20, dia: "Miércoles", bloque: "3 y 5", hora: "11:00-12:15 / 14:00-15:15", lab: "Lab.Fac.Ciencias 102", docente: "Macarena Rojas" },
            // Actualizado a Lab.Fac.Ciencias 102
            { id: 42, carrera: "Ped. en Física", codigo: "SEL 3113-13", asignatura: "EMPLEO DE TIC PARA LA VIDA ACADÉMICA", cupos: 8, dia: "Miércoles", bloque: "3 y 5", hora: "11:00-12:15 / 14:00-15:15", lab: "Lab.Fac.Ciencias 102", docente: "Macarena Rojas" },
            { id: 43, carrera: "Pedagogía en Historia y Geografía", codigo: "SEL 3113-4", asignatura: "EMPLEO DE TIC PARA LA VIDA ACADÉMICA", cupos: 35, dia: "Martes", bloque: "1 y 2", hora: "8:00-10:45", lab: "Casa Central 6", docente: "José Miranda" },
            { id: 44, carrera: "Geografía", codigo: "TIC 1111-13", asignatura: "TIC para la Vida Académica", cupos: 35, dia: "Viernes", bloque: "1 y 2", hora: "8:00-10:45", lab: "Casa Central 6", docente: "Manuel Martínez" },
            { id: 45, carrera: "Tecnología en deportes y recreación", codigo: "TIC 1111-6", asignatura: "TIC para la Vida Académica", cupos: 35, dia: "Viernes", bloque: "1 y 2", hora: "8:00-10:45", lab: "Casa Central 6", docente: "Manuel Martínez" },
        ];

        // --- CONFIGURACIÓN ---
        const categories = [
            { id: 'docente', label: 'Docente', field: 'docente', placeholder: 'Ver todos los docentes' },
            { id: 'carrera', label: 'Carrera', field: 'carrera', placeholder: 'Ver todas las carreras' },
            { id: 'seccion', label: 'Sección', field: 'codigo', placeholder: 'Ver todas las secciones' },
            { id: 'horario', label: 'Día', field: 'dia', placeholder: 'Ver todos los días' },
            { id: 'laboratorio', label: 'Laboratorio', field: 'lab', placeholder: 'Ver todos los laboratorios' },
        ];

        // --- ESTADO ---
        let state = {
            activeCategory: 'docente',
            selectedOption: ''
        };

        // --- ELEMENTOS DOM ---
        const categoryButtonsContainer = document.getElementById('category-buttons');
        const optionSelect = document.getElementById('option-select');
        const initialStateDiv = document.getElementById('initial-state');
        const resultsContainer = document.getElementById('results-container');
        const tableBody = document.getElementById('table-body');
        const mobileCards = document.getElementById('mobile-cards');
        const resultsCount = document.getElementById('results-count');
        const countNumber = document.getElementById('count-number');
        const noResultsDiv = document.getElementById('no-results');

        // --- FUNCIONES ---

        // 1. Renderizar Botones de Categoría
        function renderCategoryButtons() {
            categoryButtonsContainer.innerHTML = '';
            categories.forEach(cat => {
                const btn = document.createElement('button');
                btn.textContent = cat.label;
                btn.className = `px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 flex items-center gap-2 ${
                    state.activeCategory === cat.id 
                    ? 'bg-sky-500 text-white shadow-md transform scale-105' 
                    : 'bg-slate-100 text-slate-600 hover:bg-slate-200'
                }`;
                btn.onclick = () => handleCategoryChange(cat.id);
                categoryButtonsContainer.appendChild(btn);
            });
        }

        // 2. Llenar el Select basado en la categoría activa
        function populateDropdown() {
            const categoryConfig = categories.find(c => c.id === state.activeCategory);
            const field = categoryConfig ? categoryConfig.field : '';
            const placeholderText = categoryConfig ? categoryConfig.placeholder : 'Selecciona una opción';
            
            // Obtener opciones únicas
            let options = [...new Set(initialData.map(item => item[field]))];

            // Ordenar opciones
            if (state.activeCategory === 'horario') {
                const dayOrder = { "Lunes": 1, "Martes": 2, "Miércoles": 3, "Jueves": 4, "Viernes": 5, "Sábado": 6 };
                options.sort((a, b) => (dayOrder[a] || 99) - (dayOrder[b] || 99));
            } else if (state.activeCategory === 'seccion') {
                // Ordenamiento natural para códigos (ej. SEL 3113-2 antes que SEL 3113-10)
                options.sort((a, b) => a.localeCompare(b, undefined, { numeric: true, sensitivity: 'base' }));
            } else {
                options.sort();
            }

            // Limpiar y llenar select
            optionSelect.innerHTML = `<option value="">-- ${placeholderText} --</option>`;
            options.forEach(opt => {
                const optionElement = document.createElement('option');
                optionElement.value = opt;
                optionElement.textContent = opt;
                optionSelect.appendChild(optionElement);
            });

            // Establecer valor actual (o resetear si cambió categoría)
            optionSelect.value = state.selectedOption;
        }

        // 3. Renderizar Resultados
        function renderResults() {
            // Lógica de visibilidad
            if (!state.selectedOption) {
                initialStateDiv.classList.remove('hidden');
                resultsContainer.classList.add('hidden');
                resultsCount.classList.add('hidden');
                return;
            }

            initialStateDiv.classList.add('hidden');
            resultsContainer.classList.remove('hidden');
            resultsCount.classList.remove('hidden');

            // Filtrar datos
            const categoryConfig = categories.find(c => c.id === state.activeCategory);
            const field = categoryConfig ? categoryConfig.field : '';
            
            const filteredData = initialData.filter(item => item[field] === state.selectedOption);
            
            // Ordenar resultados por código de sección ascendente
            filteredData.sort((a, b) => a.codigo.localeCompare(b.codigo, undefined, { numeric: true, sensitivity: 'base' }));

            // Actualizar contador
            countNumber.textContent = filteredData.length;

            // Limpiar contenedores
            tableBody.innerHTML = '';
            mobileCards.innerHTML = '';

            if (filteredData.length === 0) {
                noResultsDiv.classList.remove('hidden');
                return;
            } else {
                noResultsDiv.classList.add('hidden');
            }

            // Generar Filas (Tabla Desktop)
            filteredData.forEach(item => {
                const row = document.createElement('tr');
                row.className = "hover:bg-sky-50 transition-colors group border-b border-slate-50 last:border-0";
                row.innerHTML = `
                    <td class="p-4 font-mono text-xs font-semibold text-slate-500 group-hover:text-sky-700">${item.codigo}</td>
                    <td class="p-4 font-medium text-slate-800">${item.carrera}</td>
                    <td class="p-4 text-slate-600 text-xs">${item.asignatura}</td>
                    <td class="p-4">
                        <div class="flex flex-col">
                            <span class="font-bold text-slate-700 capitalize">${item.dia}</span>
                            <span class="text-xs text-slate-500">${item.hora}</span>
                        </div>
                    </td>
                    <td class="p-4">
                        <span class="inline-flex items-center gap-1 bg-amber-50 text-amber-700 px-2 py-1 rounded text-xs font-bold border border-amber-100">
                            ${item.lab}
                        </span>
                    </td>
                    <td class="p-4 text-slate-600">${item.docente}</td>
                `;
                tableBody.appendChild(row);

                // Generar Cards (Móvil)
                const card = document.createElement('div');
                card.className = "bg-white p-4 rounded-xl shadow-sm border border-slate-200 relative overflow-hidden";
                card.innerHTML = `
                    <div class="absolute top-0 left-0 w-1 h-full bg-sky-500"></div>
                    <div class="pl-3">
                        <div class="flex justify-between items-start mb-2">
                            <span class="text-xs font-bold text-sky-600 uppercase tracking-wide">${item.carrera}</span>
                            <span class="text-xs font-mono text-slate-400 bg-slate-50 px-2 py-0.5 rounded">${item.codigo}</span>
                        </div>
                        
                        <h3 class="font-bold text-slate-800 mb-3 text-sm">${item.asignatura}</h3>
                        
                        <div class="space-y-2">
                            <div class="flex items-center text-sm text-slate-600">
                                <!-- User Icon -->
                                <svg class="text-slate-400 mr-2 h-4 w-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                                ${item.docente}
                            </div>
                            <div class="flex items-center text-sm text-slate-600">
                                <!-- Calendar Icon -->
                                <svg class="text-slate-400 mr-2 h-4 w-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
                                <span class="capitalize mr-2">${item.dia}</span>
                                <span class="text-slate-400">|</span>
                                <span class="ml-2">${item.hora}</span>
                            </div>
                            <div class="flex items-center text-sm text-slate-600">
                                <!-- MapPin Icon -->
                                <svg class="text-slate-400 mr-2 h-4 w-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>
                                ${item.lab}
                            </div>
                        </div>
                    </div>
                `;
                mobileCards.appendChild(card);
            });
        }

        // --- MANEJADORES DE EVENTOS ---

        function handleCategoryChange(catId) {
            state.activeCategory = catId;
            state.selectedOption = ''; // Resetear selección
            renderCategoryButtons();
            populateDropdown();
            renderResults();
        }

        optionSelect.addEventListener('change', (e) => {
            state.selectedOption = e.target.value;
            renderResults();
        });

        // --- INICIALIZACIÓN ---
        renderCategoryButtons();
        populateDropdown();
        renderResults();

    </script>
</body>
</html>